# Vercel 배포 가이드

## 중요 사항

⚠️ **SQLite는 Vercel에서 작동하지 않습니다!** PostgreSQL 데이터베이스를 사용해야 합니다.

## 배포 단계

### 1. PostgreSQL 데이터베이스 설정

다음 중 하나를 선택하세요:

#### 옵션 A: Vercel Postgres 사용 (권장)
1. Vercel 대시보드에서 프로젝트 선택
2. Storage 탭 → Create Database → Postgres 선택
3. 데이터베이스 생성 후 연결 문자열 복사

#### 옵션 B: Supabase 사용
1. [Supabase](https://supabase.com)에서 프로젝트 생성
2. Settings → Database → Connection string 복사

#### 옵션 C: Neon 사용
1. [Neon](https://neon.tech)에서 프로젝트 생성
2. Connection string 복사

### 2. Vercel 환경 변수 설정

Vercel 대시보드 → Settings → Environment Variables에서 다음 변수들을 추가하세요:

```
DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require
NEXTAUTH_SECRET=your-secret-key-here-minimum-32-characters-long
NEXTAUTH_URL=https://your-app-name.vercel.app
```

**NEXTAUTH_SECRET 생성 방법:**
```bash
openssl rand -base64 32
```

### 3. 데이터베이스 마이그레이션

로컬에서 마이그레이션 실행:
```bash
npx prisma migrate dev --name init
```

또는 Vercel 배포 후 자동으로 스키마가 생성됩니다.

### 4. 배포

GitHub에 푸시하면 Vercel이 자동으로 배포합니다.

## 문제 해결

### 오류: "Prisma Client has not been initialized"
- `postinstall` 스크립트가 실행되는지 확인
- Vercel 빌드 로그에서 `prisma generate` 실행 확인

### 오류: "Database connection failed"
- DATABASE_URL 환경 변수가 올바른지 확인
- PostgreSQL 데이터베이스가 실행 중인지 확인
- SSL 모드가 올바른지 확인 (Vercel Postgres는 `?sslmode=require` 필요)

### 오류: "Module not found"
- `package.json`의 dependencies 확인
- `node_modules`가 제대로 설치되었는지 확인

## 로컬 개발

로컬에서는 SQLite를 계속 사용할 수 있습니다:

1. `.env.local` 파일 생성:
```
DATABASE_URL="file:./dev.db"
NEXTAUTH_SECRET="local-secret-key"
NEXTAUTH_URL="http://localhost:3000"
```

2. Prisma 스키마를 로컬용으로 변경:
```prisma
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}
```

3. 개발 서버 실행:
```bash
npm run dev
```
